{
	"size": 0,
	"query": {
		"bool": {
			"must": [
				{
					"terms": {
						"session_type": [
							"transference"
						],
						"boost": 1.0
					}
				},
				{
					"terms": {
						"session_start": [
							"2023-09-29 22:33:23.159"
						],
						"boost": 1.0
					}
				},
				{
					"match": {
						"user_id": {
							"query": "emiliegalic",
							"operator": "OR",
							"prefix_length": 0,
							"max_expansions": 50,
							"fuzzy_transpositions": true,
							"lenient": false,
							"zero_terms_query": "NONE",
							"auto_generate_synonyms_phrase_query": true,
							"boost": 1.0
						}
					}
				}
			],
			"adjust_pure_negative": true,
			"boost": 1.0
		}
	},
	"aggregations": {
		"sessions": {
			"terms": {
				"field": "session_start.keyword",
				"size": 100,
				"min_doc_count": 1,
				"shard_min_doc_count": 0,
				"show_term_doc_count_error": false,
				"order": [
					{
						"started": "asc"
					},
					{
						"_key": "asc"
					}
				]
			},
			"aggregations": {
				"started": {
					"min": {
						"field": "timestamp"
					}
				},
				"ended": {
					"max": {
						"field": "timestamp"
					}
				},
				"bci": {
					"extended_stats": {
						"field": "bci",
						"sigma": 2.0
					}
				},
				"target": {
					"max": {
						"field": "TargetDecodes"
					}
				},
				"end_event": {
					"filter": {
						"terms": {
							"event_type": [
								"TransferenceStatsEnd"
							],
							"boost": 1.0
						}
					}
				},
				"dishes": {
					"terms": {
						"field": "DishID",
						"size": 100,
						"min_doc_count": 1,
						"shard_min_doc_count": 0,
						"show_term_doc_count_error": false,
						"order": [
							{
								"dish_start": "asc"
							},
							{
								"_key": "asc"
							}
						]
					},
					"aggregations": {
						"dish_start": {
							"min": {
								"field": "timestamp"
							}
						},
						"dish_end": {
							"max": {
								"field": "timestamp"
							}
						},
						"decodes": {
							"filter": {
								"terms": {
									"event_type": [
										"TransferenceStatsMoleculeDecodeStart",
										"TransferenceStatsMoleculeDecodeEnd"
									],
									"boost": 1.0
								}
							},
							"aggregations": {
								"decode_start": {
									"min": {
										"field": "timestamp"
									}
								},
								"decode_end": {
									"max": {
										"field": "timestamp"
									}
								},
								"decoded": {
									"filter": {
										"terms": {
											"event_type": [
												"TransferenceStatsMoleculeDecodeEnd"
											],
											"boost": 1.0
										}
									}
								}
							}
						},
						"actions": {
							"filter": {
								"terms": {
									"event_type": [
										"TransferenceStatsMoleculeSelected",
										"TransferenceStatsMoleculeRejected"
									],
									"boost": 1.0
								}
							},
							"aggregations": {
								"first_action": {
									"min": {
										"field": "timestamp"
									}
								},
								"last_action": {
									"max": {
										"field": "timestamp"
									}
								},
								"rejections": {
									"filter": {
										"terms": {
											"event_type": [
												"TransferenceStatsMoleculeRejected"
											],
											"boost": 1.0
										}
									}
								}
							}
						},
						"display": {
							"filter": {
								"terms": {
									"event_type": [
										"TransferenceStatsMoleculeDisplay"
									],
									"boost": 1.0
								}
							},
							"aggregations": {
								"first_displayed": {
									"min": {
										"field": "timestamp"
									}
								}
							}
						}
					}
				}
			}
		}
	}
}