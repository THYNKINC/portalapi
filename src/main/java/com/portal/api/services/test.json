{
	"query": {
		"bool": {
			"must": [
				{
					"range": {
						"timestamp": {
							"from": "now-1M/M",
							"to": null,
							"include_lower": false,
							"include_upper": true,
							"boost": 1.0
						}
					}
				}
			],
			"adjust_pure_negative": true,
			"boost": 1.0
		}
	},
	"aggregations": {
		"players": {
			"terms": {
				"field": "user_id",
				"size": 1000,
				"min_doc_count": 1,
				"shard_min_doc_count": 0,
				"show_term_doc_count_error": false,
				"order": [
					{
						"_count": "desc"
					},
					{
						"_key": "asc"
					}
				]
			},
			"aggregations": {
				"last_session": {
					"top_hits": {
						"from": 0,
						"size": 1,
						"version": false,
						"seq_no_primary_term": false,
						"explain": false,
						"sort": [
							{
								"start_date": {
									"order": "desc"
								}
							}
						]
					}
				}
			}
		}
	}
}